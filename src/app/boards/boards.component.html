<app-drawer>
    <div style="margin-top: 10px;">
        <span class="btn-label">Create Workflow :</span>
        <button style="background-color:#3f51b5; color: white" mat-raised-button (click)="addCard(boards, 0)">
            Add New Epic
        </button>
    </div>

    <div *ngFor="let epic of boards.talks; let epicIndex = index;" style="overflow: scroll;">
        <div class="epic">
            <div class="action-btn">
                <button mat-button [matMenuTriggerFor]="cardOption" matTooltip="Edit & Delete Card">
                    <mat-icon>more_vert</mat-icon>
                </button>
                <mat-menu #cardOption="matMenu">
                    <button mat-menu-item (click)="editCard(epic, boards.talks, epicIndex)">
                        <mat-icon>create</mat-icon>
                        <span>Edit</span>
                    </button>
                    <button mat-menu-item (click)="deleteCard(epic, boards.talks, epicIndex)">
                        <mat-icon>delete</mat-icon><span>Delete</span>
                    </button>
                </mat-menu>
                <button mat-icon-button matTooltip="Add new feature" (click)="addCard(epic, 1)">
                    <mat-icon>add_box</mat-icon>
                </button>
            </div>
            <div class="card-content">
                <h3 class="card-title">{{epic.title}}</h3>
                <span class="card-text">{{epic.text}}</span>
                <span class="card-speaker" *ngIf="epic.speaker">By: {{epic.speaker}}</span>
            </div>
            <!-- Release -->
            <div style="display: table-cell;">
                <div style="display: table;"
                    *ngFor="let release of epic.talks; let releaseIndex = index; let lastIndex = last" class="release"
                    [ngStyle]="{'margin-bottom' : lastIndex ? '0px' : '10px'}">

                    <div class="action-btn">
                        <button mat-button [matMenuTriggerFor]="cardOption" matTooltip="Edit & Delete Card">
                            <mat-icon>more_vert</mat-icon>
                        </button>
                        <mat-menu #cardOption="matMenu">
                            <button mat-menu-item (click)="editCard(release, epic.talks, releaseIndex)">
                                <mat-icon>create</mat-icon>
                                <span>Edit</span>
                            </button>
                            <button mat-menu-item (click)="deleteCard(release, epic.talks, releaseIndex)">
                                <mat-icon>delete</mat-icon><span>Delete</span>
                            </button>
                        </mat-menu>
                        <button mat-icon-button matTooltip="Add new feature" (click)="addCard(release, 2)">
                            <mat-icon>add_box</mat-icon>
                        </button>
                    </div>
                    <div class="card-content">
                        <h3 class="card-title">{{release.title}}</h3>
                        <span class="card-text">{{release.text}}</span>
                        <span class="card-speaker" *ngIf="release.speaker">By: {{release.speaker}}</span>
                    </div>

                    <!-- Feature -->
                    <div style="display: table-cell;">
                        <div *ngFor="let feature of release.talks; let featureIndex = index; let lastIndex = last"
                            class="feature" [ngStyle]="{'margin-bottom' : lastIndex ? '0px' : '10px'}">

                            <div class="action-btn">
                                <button mat-button [matMenuTriggerFor]="cardOption" matTooltip="Edit & Delete Card">
                                    <mat-icon>more_vert</mat-icon>
                                </button>
                                <mat-menu #cardOption="matMenu">
                                    <button mat-menu-item (click)="editCard(feature, release.talks, featureIndex)">
                                        <mat-icon>create</mat-icon>
                                        <span>Edit</span>
                                    </button>
                                    <button mat-menu-item (click)="deleteCard(feature, release.talks, featureIndex)">
                                        <mat-icon>delete</mat-icon><span>Delete</span>
                                    </button>
                                </mat-menu>
                                <button mat-icon-button matTooltip="Add new feature" (click)="addCard(feature, 3)">
                                    <mat-icon>add_box</mat-icon>
                                </button>
                            </div>
                            <div class="card-content">
                                <h3 class="card-title">{{feature.title}}</h3>
                                <span class="card-text">{{feature.text}}</span>
                                <span class="card-speaker" *ngIf="feature.speaker">By: {{feature.speaker}}</span>
                            </div>

                            <!-- User Story -->
                            <div style="display: table-cell;">
                                <div style="display: table;"
                                    *ngFor="let userStory of feature.talks; let userStoryIndex = index; let lastIndex = last"
                                    class="user-story" [ngStyle]="{'margin-bottom' : lastIndex ? '0px' : '10px'}">

                                    <div class="action-btn">
                                        <button mat-button [matMenuTriggerFor]="cardOption"
                                            matTooltip="Edit & Delete Card">
                                            <mat-icon>more_vert</mat-icon>
                                        </button>
                                        <mat-menu #cardOption="matMenu">
                                            <button mat-menu-item
                                                (click)="editCard(userStory, feature.talks, userStoryIndex)">
                                                <mat-icon>create</mat-icon>
                                                <span>Edit</span>
                                            </button>
                                            <button mat-menu-item
                                                (click)="deleteCard(userStory, feature.talks, userStoryIndex)">
                                                <mat-icon>delete</mat-icon><span>Delete</span>
                                            </button>
                                        </mat-menu>
                                        <button mat-icon-button matTooltip="Add new userStory"
                                            (click)="addCard(userStory, 4)">
                                            <mat-icon>add_box</mat-icon>
                                        </button>
                                    </div>
                                    <div class="card-content">
                                        <h3 class="card-title">{{userStory.title}}</h3>
                                        <span class="card-text">{{userStory.text}}</span>
                                        <span class="card-speaker" *ngIf="userStory.speaker">By:
                                            {{userStory.speaker}}</span>
                                    </div>

                                    <!-- Task -->
                                    <div style="display: table-cell;">
                                        <div *ngFor="let task of userStory.talks; let taskIndex = index; let lastIndex = last"
                                            class="task" [ngStyle]="{'margin-bottom' : lastIndex ? '0px' : '10px'}">

                                            <div class="action-btn">
                                                <button mat-button [matMenuTriggerFor]="cardOption"
                                                    matTooltip="Edit & Delete Card">
                                                    <mat-icon>more_vert</mat-icon>
                                                </button>
                                                <mat-menu #cardOption="matMenu">
                                                    <button mat-menu-item
                                                        (click)="editCard(task, userStory.talks, taskIndex)">
                                                        <mat-icon>create</mat-icon>
                                                        <span>Edit</span>
                                                    </button>
                                                    <button mat-menu-item
                                                        (click)="deleteCard(task, userStory.talks, taskIndex)">
                                                        <mat-icon>delete</mat-icon><span>Delete</span>
                                                    </button>
                                                </mat-menu>
                                                <!-- <button mat-icon-button matTooltip="Add new task" (click)="addCard(task, 4)">
                                                    <mat-icon>add_box</mat-icon>
                                                </button> -->
                                            </div>
                                            <div class="card-content">
                                                <h3 class="card-title">{{task.title}}</h3>
                                                <span class="card-text">{{task.text}}</span>
                                                <span class="card-speaker" *ngIf="task.speaker">By:
                                                    {{task.speaker}}</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>

        </div>

    </div>
</app-drawer>